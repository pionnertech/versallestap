# compress all text and html:
AddOutputFilterByType DEFLATE text/html text/plain text/xml
 <location>
    SetOutputFilter DEFLATE
      SetEnvIfNoCase Request_URI  \
        \.(?:gif|jpe?g|png)$ no-gzip dont-vary
    SetEnvIfNoCase Request_URI  \
        \.(?:exe|t?gz|zip|gz2|sit|rar)$ no-gzip dont-vary
</location>
<ifmodule mod_gzip.c="">
    mod_gzip_on       Yes
    mod_gzip_dechunk  Yes
    mod_gzip_item_include file      \.(html?|txt|css|js|php|pl)$
    mod_gzip_item_include handler   ^cgi-script$
    mod_gzip_item_include mime      ^text/.*
    mod_gzip_item_include mime      ^application/x-javascript.*
    mod_gzip_item_exclude mime      ^image/.*
    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifmodule>
<filesmatch "\.(js)"="">
    ForceType application/x-httpd-php
 
    php_value auto_prepend_file "/the/full/path/of/this/file/gzip-js.php"
 
</filesmatch>